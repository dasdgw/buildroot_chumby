From b40f31606fd68b573395543d64d30cb57dc9eb86 Mon Sep 17 00:00:00 2001
From: dasdgw <michifrank2@gmx.de>
Date: Sun, 7 Feb 2021 01:35:26 +0100
Subject: [PATCH 21/29] add audio to chumby dts

---
 arch/arm/boot/dts/imx23-chumby.dts | 31 ++++++++++++++++++++++++++++--
 1 file changed, 29 insertions(+), 2 deletions(-)

diff --git a/arch/arm/boot/dts/imx23-chumby.dts b/arch/arm/boot/dts/imx23-chumby.dts
index 3b762867e11e..1811ae7f1d74 100644
--- a/arch/arm/boot/dts/imx23-chumby.dts
+++ b/arch/arm/boot/dts/imx23-chumby.dts
@@ -96,9 +96,12 @@
 				hog_pins_a: hog@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-	*					MX23_PAD_AUART1_CTS__AUART1_CTS Hub enable?*/
+						MX23_PAD_AUART1_CTS__GPIO_0_26 /* Hub pwr? */
+						MX23_PAD_AUART1_TX__GPIO_0_29 /* Hub nreset? */
 						MX23_PAD_LCD_RESET__LCD_RESET  /*set high to disable*/
-	*					MX23_PAD_LCD_RESET__GPIO_1_18 /* used in imx23-evk - */
+/*						MX23_PAD_LCD_RESET__GPIO_1_18 /* used in imx23-evk - */
 					>;
+					gpio-hog;
+					output-high;
 					fsl,drive-strength = <MXS_DRIVE_4mA>;
 					fsl,voltage = <MXS_VOLTAGE_HIGH>;
@@ -195,6 +195,26 @@
 			usbphy0: usbphy@8007c000 {
 				status = "okay";
 			};
+
+			codec: mxs-builtin-codec {
+				compatible = "fsl,mxs-builtin-codec";
+				reg = <0x80048000 0x2000>, <0x8004c000 0x2000>,
+					<0x8005c000 0x2000>;
+				reg-names = "audioout", "audioin", "rtc";
+				clocks = <&clks 31>;
+				clock-names = "filt";
+			};
+
+			platform_dai: mxs-builtin-cpu-dai {
+				compatible = "fsl,mxs-builtin-cpu-dai";
+				reg = <0x80048000 0x2000>, <0x8004c000 0x2000>,
+				<0x8005c000 0x2000>;
+				reg-names = "audioout", "audioin", "rtc";
+				interrupts = <8 6 4>;
+				dmas = <&dma_apbx 0>, <&dma_apbx 1>;
+				dma-names = "rx", "tx";
+			};
+
 		};
 	};
 
@@ -231,4 +251,11 @@
 		brightness-levels = <0 4 8 16 32 64 128 255>;
 		default-brightness-level = <7>;
 	};
+
+	mxs-builtin-audio {
+		compatible = "fsl,mxs-builtin-audio";
+		audio-codec = <&codec>;
+		cpu-dai = <&platform_dai>;
+	};
+
 };
-- 
2.17.1

